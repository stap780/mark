<%= turbo_frame_tag "trigger_value_field" do %>
  <% if @trigger_type == 'manual' %>
    <div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md">
      <p class="text-sm text-blue-800">
        <strong>Как это работает:</strong> Форма будет показываться только при клике на элементы с атрибутом <code class="bg-blue-100 px-1 rounded">data-twc-webform-id="<%= @webform.id %>"</code>.
      </p>
      <p class="text-sm text-blue-700 mt-2">
        <strong>Пример использования:</strong>
      </p>
      <pre class="text-xs bg-blue-100 p-2 rounded mt-1 overflow-x-auto"><code>&lt;button data-twc-webform-id="<%= @webform.id %>"&gt;Показать форму&lt;/button&gt;

&lt;!-- С дополнительными параметрами --&gt;
&lt;a href="#" data-twc-webform-id="<%= @webform.id %>" 
   data-product-id="123" 
   data-variant-id="456"&gt;
  Заказать товар
&lt;/a&gt;</code></pre>
    </div>
  <% elsif ['time_on_page', 'scroll_depth'].include?(@trigger_type) %>
    <div>
      <%= label_tag "webform_settings_trigger_value", "Значение", class: "block text-sm font-medium text-gray-700" %>
      <%= number_field_tag "webform[settings][trigger_value]",
          @webform.settings&.dig('trigger_value'),
          placeholder: @trigger_type == 'time_on_page' ? '30 (секунды)' : '75 (проценты)',
          class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-violet-500 focus:ring-violet-500 px-3 py-2.5" %>
      <p class="mt-1 text-sm text-gray-500">
        <% if @trigger_type == 'time_on_page' %>
          Форма покажется через указанное количество секунд после загрузки страницы. По умолчанию работает на всех страницах, где подключен скрипт webform.js. Можно настроить таргетинг страниц через дополнительные настройки (в разработке).
        <% elsif @trigger_type == 'scroll_depth' %>
          Форма покажется при прокрутке страницы на указанный процент. По умолчанию работает на всех страницах, где подключен скрипт webform.js. Можно настроить таргетинг страниц через дополнительные настройки (в разработке).
        <% end %>
      </p>
    </div>
  <% elsif @trigger_type == 'exit_intent' %>
    <div class="mt-2 p-3 bg-green-50 border border-green-200 rounded-md">
      <p class="text-sm text-green-800">
        <strong>Как это работает:</strong> Форма автоматически покажется, когда пользователь попытается покинуть сайт (движение мыши к верхней части окна).
      </p>
    </div>
  <% end %>
<% end %>

