<%= turbo_stream_from dom_id(@account, :users) %>
<div class="inline-flex items-center gap-4 mb-4">
  <%= link_to t(:back), admin_accounts_path,
      class: "inline-flex items-center px-3 py-1 bg-white text-violet-600 border border-violet-500 rounded-md hover:bg-violet-50" %>
  <%= tag.div @account.name, class: "text-lg font-semibold" %>
</div>

<% if @account.partner? %>
  <div class="bg-white rounded-lg shadow divide-y mb-4">
    <div class="px-4 py-3 border-b">
      <h3 class="text-base font-semibold text-gray-700"><%= t('admin.accounts.partner_settings') %></h3>
    </div>
    <% if @account.settings.present? %>
      <dl class="divide-y">
        <% @account.settings.each do |key, value| %>
          <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-start">
            <dt class="text-sm font-medium text-gray-600"><%= key.to_s.humanize %></dt>
            <dd class="text-sm text-gray-900 break-words">
              <% if key.to_s == 'logo' && value.is_a?(String) && value.present? %>
                <%= image_tag value, alt: "Logo", class: "h-16 w-16 rounded-lg object-cover border border-gray-200" %>
              <% else %>
                <%= format_account_setting(value) %>
              <% end %>
            </dd>
          </div>
        <% end %>
      </dl>
    <% else %>
      <div class="px-4 py-3 text-sm text-gray-500">
        <%= t('admin.accounts.no_partner_settings') %>
      </div>
    <% end %>
  </div>
<% end %>

<%# Account Statistics Section %>
<div class="bg-white rounded-lg shadow divide-y mb-4">
  <div class="px-4 py-3 border-b">
    <h3 class="text-base font-semibold text-gray-700"><%= t('admin.accounts.statistics') %></h3>
  </div>
  <dl class="divide-y">
    <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-center">
      <dt class="text-sm font-medium text-gray-600"><%= t('admin.accounts.products_count') %></dt>
      <dd class="text-sm text-gray-900"><%= @account_stats[:products_count] %></dd>
    </div>
    <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-center">
      <dt class="text-sm font-medium text-gray-600"><%= t('admin.accounts.clients_count') %></dt>
      <dd class="text-sm text-gray-900"><%= @account_stats[:clients_count] %></dd>
    </div>
    <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-center">
      <dt class="text-sm font-medium text-gray-600"><%= t('admin.accounts.swatch_groups_count') %></dt>
      <dd class="text-sm text-gray-900"><%= @account_stats[:swatch_groups_count] %></dd>
    </div>
    <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-center">
      <dt class="text-sm font-medium text-gray-600"><%= t('admin.accounts.lists_count') %></dt>
      <dd class="text-sm text-gray-900"><%= @account_stats[:lists_count] %></dd>
    </div>
    <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-center">
      <dt class="text-sm font-medium text-gray-600"><%= t('admin.accounts.list_items_count') %></dt>
      <dd class="text-sm text-gray-900"><%= @account_stats[:list_items_count] %></dd>
    </div>
    <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-center">
      <dt class="text-sm font-medium text-gray-600"><%= t('admin.accounts.incases_count') %></dt>
      <dd class="text-sm text-gray-900"><%= @account_stats[:incases_count] %></dd>
    </div>
    <div class="grid grid-cols-[200px_1fr] gap-4 px-4 py-3 items-center">
      <dt class="text-sm font-medium text-gray-600"><%= t('admin.accounts.incase_types_count') %></dt>
      <dd class="text-sm text-gray-900"><%= @account_stats[:incase_types_count] %></dd>
    </div>
  </dl>
</div>

<div class="p-0">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-medium"><%= t('admin.accounts.user_list') %></h3>
    <%= link_to_new new_admin_account_user_path(@account), text: t('admin.accounts.new_user'), data: { turbo_frame: :offcanvas } %>
  </div>
  <div class="bg-white rounded-lg shadow divide-y">
    <div class="grid grid-cols-[1fr_150px_100px] gap-4 p-4 font-medium text-gray-700">
      <div><%= t('admin.accounts.email') %></div>
      <div><%= t('admin.accounts.role') %></div>
      <div></div>
    </div>
    <%= turbo_frame_tag dom_id(@account, :users) do %>
      <% @account.users.each do |user| %>
        <%= render "admin/accounts/user", user: user, account: @account %>
      <% end %>
    <% end %>
  </div>
</div>